# KeyboardAvoidingView Implementation for Password Field Visibility

## Overview

This task list outlines the steps needed to implement a solution that ensures the password field remains visible when the keyboard appears on the sign-up screen.

## Implementation Tasks

### 1. Import Required Components

- [x] **Task 1.1: Add Required Imports to sign-up.tsx**
  - File: `app/(auth)/sign-up.tsx`
  - Change: Add KeyboardAvoidingView and Platform imports
  ```tsx
  import {
    Alert,
    Image,
    ImageBackground,
    KeyboardAvoidingView,
    Platform,
    SafeAreaView,
    ScrollView,
    Text,
    View,
  } from "react-native";
  ```

### 2. Implement KeyboardAvoidingView Component

- [x] **Task 2.1: Wrap ScrollView with KeyboardAvoidingView**

  - File: `app/(auth)/sign-up.tsx`
  - Change: Update the return statement in the SignUp component to wrap ScrollView with KeyboardAvoidingView

  ```tsx
  return (
    <SafeAreaView className="h-full bg-white">
      <KeyboardAvoidingView
        behavior={Platform.OS === "ios" ? "padding" : "height"}
        style={{ flex: 1 }}
        keyboardVerticalOffset={Platform.OS === "ios" ? 64 : 0}
      >
        <ScrollView
          className="flex-1"
          keyboardShouldPersistTaps="handled"
          showsVerticalScrollIndicator={false}
        >
          {/* Header Image Section */}
          <View className="h-[220px] w-full">
            <ImageBackground
              source={images.signUpCar}
              className="w-full h-full"
              resizeMode="cover"
            >
              {/* Gradient overlay */}
              <View className="w-full h-full bg-gradient-to-b from-transparent to-white"></View>
            </ImageBackground>
          </View>

          {/* Content Section */}
          <View className="w-full px-6 pt-4 pb-8">
            {/* Heading */}
            <Text className="text-2xl font-JakartaBold text-[#333333] mb-6">
              Create Your Account
            </Text>
            {/* Form Fields */}
            <View className="mb-6">
              <View className="mb-4">
                <FormField
                  title="Name"
                  placeholder="Enter name"
                  value={form.name}
                  handleChangeText={(text: string) => {
                    setForm((prevForm) => ({
                      ...prevForm,
                      name: text,
                    }));
                  }}
                  icon={<User size={20} color="#858585" />}
                />
              </View>

              <View className="mb-4">
                <FormField
                  title="Email"
                  placeholder="Enter email"
                  value={form.email}
                  handleChangeText={(text: string) => {
                    setForm((prevForm) => ({
                      ...prevForm,
                      email: text,
                    }));
                  }}
                  keyboardType="email-address"
                  icon={<Mail size={20} color="#858585" />}
                />
              </View>

              <View>
                <FormField
                  title="Password"
                  placeholder="Enter password"
                  value={form.password}
                  handleChangeText={(text: string) => {
                    setForm((prevForm) => ({
                      ...prevForm,
                      password: text,
                    }));
                  }}
                  secureTextEntry
                  icon={<Lock size={20} color="#858585" />}
                />
              </View>
            </View>
            {/* Sign Up Button */}
            <PrimaryButton
              title="Sign Up"
              onPress={onSignUpPress}
              bgVariant="primary"
              textVariant="default"
              isLoading={isSubmitting}
              className="shadow-md"
            />
            {/* Divider */}
            <Divider text="Or" />
            {/* Google Sign In Button */}
            <PrimaryButton
              title="Log In with Google"
              onPress={handleGoogleSignIn}
              bgVariant="outline"
              textVariant="primary"
              IconLeft={({ size, color, style }) => (
                <Image
                  source={icons.google}
                  style={[{ width: size, height: size }, style]}
                />
              )}
            />
            {/* Already have an account */}
            <View className="flex-row justify-center mt-6">
              <Text className="text-[17px] font-JakartaMedium text-[#858585]">
                Already have an account?{" "}
              </Text>
              <Link
                href="/sign-in"
                className="text-[17px] font-JakartaMedium text-primary-500"
              >
                Sign In
              </Link>
            </View>
            {/* Modal components remain unchanged */}
            <ReactNativeModal
              isVisible={verification.state === "pending"}
              onModalHide={() => {
                if (verification.state === "success") {
                  setShowSuccessModal(true);
                }
              }}
            >
              {/* Modal content remains unchanged */}
            </ReactNativeModal>
            <ReactNativeModal isVisible={showSuccessModal}>
              {/* Modal content remains unchanged */}
            </ReactNativeModal>
          </View>
        </ScrollView>
      </KeyboardAvoidingView>
    </SafeAreaView>
  );
  ```

### 3. Adjustment and Testing Tasks

- [x] **Task 3.1: Verify ScrollView Props**

  - Ensure ScrollView has proper props for keyboard interaction
  - Check that `keyboardShouldPersistTaps="handled"` is included
  - Verify that `showsVerticalScrollIndicator={false}` is set (optional but recommended)

- [ ] **Task 3.2: Test iOS-specific behavior** (Requires manual testing)

  - Test on iOS simulator or device
  - Verify password field remains visible when keyboard appears
  - Check that the padding behavior works correctly
  - Validate that the keyboardVerticalOffset (64) is appropriate for iOS

- [ ] **Task 3.3: Test Android-specific behavior** (Requires manual testing)

  - Test on Android emulator or device
  - Verify password field remains visible when keyboard appears
  - Check that the height behavior works correctly
  - If issues arise, consider changing behavior to 'position' instead of 'height'

- [ ] **Task 3.4: Fine-tune keyboardVerticalOffset if needed** (Based on testing results)

  - File: `app/(auth)/sign-up.tsx`
  - Change: Adjust the keyboardVerticalOffset value based on testing results if the default value doesn't provide optimal results

  ```tsx
  <KeyboardAvoidingView
    behavior={Platform.OS === 'ios' ? 'padding' : 'height'}
    style={{ flex: 1 }}
    keyboardVerticalOffset={Platform.OS === 'ios' ? 80 : 0} // Adjust value if needed
  >
  ```

- [ ] **Task 3.5: Add bottom padding to ScrollView if needed** (Based on testing results)
  - File: `app/(auth)/sign-up.tsx`
  - Change: Add contentContainerStyle with bottom padding if needed after testing
  ```tsx
  <ScrollView
    className="flex-1"
    keyboardShouldPersistTaps="handled"
    showsVerticalScrollIndicator={false}
    contentContainerStyle={{ paddingBottom: 20 }} // Add if needed
  >
  ```

### 4. Alternative Implementation Options (if primary solution encounters issues)

- [ ] **Task 4.1: Try alternative behavior for Android** (Only if needed after testing)
  - File: `app/(auth)/sign-up.tsx`
  - Change: If 'height' behavior doesn't work well on Android, change to 'position'
  ```tsx
  <KeyboardAvoidingView
    behavior={Platform.OS === 'ios' ? 'padding' : 'position'}
    style={{ flex: 1 }}
    keyboardVerticalOffset={Platform.OS === 'ios' ? 64 : 0}
  >
  ```

## Verification Checklist (All require manual testing)

- [ ] **Verification 1: Password field visibility**

  - Tap on the password field and verify it remains visible above the keyboard
  - Check all form fields are accessible when keyboard is open

- [ ] **Verification 2: Cross-platform testing**

  - Test on both iOS and Android
  - Test on different screen sizes if possible

- [ ] **Verification 3: Scrolling behavior**

  - Verify scrolling works correctly when keyboard is visible
  - Test that all form fields and buttons can be accessed by scrolling

- [ ] **Verification 4: Keyboard dismissal**
  - Test that keyboard can be dismissed by tapping outside input fields
  - Verify form works correctly after keyboard is dismissed
